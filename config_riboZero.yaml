## Important note:
## All paths defined in this configuration file must be either absolute or relative to the 
## location of the Snakefile!

## Reference annotation details
##--------------------------------------------------------------------------------------------
## Specify "Ensembl" or "Gencode" depending on your choice
annotation: Ensembl

organism: Homo_sapiens # separate with underscore
build: GRCh38
release: 98
##--------------------------------------------------------------------------------------------


## Paths to existing reference files 
##--------------------------------------------------------------------------------------------
txome: reference/Homo_sapiens.GRCh38.cdna.all.ncrna.fa.gz
genome: reference/Homo_sapiens.GRCh38.dna.primary_assembly.fa
gtf: reference/Homo_sapiens.GRCh38.98.sorted.gtf
##--------------------------------------------------------------------------------------------


## Paths to indexes that will be generated by the workflow
##--------------------------------------------------------------------------------------------
salmonindex: reference/SalmonIndex/Homo_sapiens.GRCh38.98.sidx
STARindex: reference/STARIndex/Homo_sapiens.GRCh38.98.STAR.idx
##--------------------------------------------------------------------------------------------

## Additional STAR parameters
## Here, you can specify any optional parameters for the index building and/or alignment 
## with STAR. The following arguments are automatically populated and should NOT be 
## specified here:
## Indexing: runMode, runThreadN, genomeDir, genomeFastaFiles, sjdbGTFfile, sjdbOverhang
## Alignment: runMode, genomeDir, readFilesIn, runThreadN, outFileNamePrefix, outSAMtype, readFilesCommand
##--------------------------------------------------------------------------------------------
## Add or remove parameters inside the ""
additional_star_index: ""
additional_star_align: "--outFilterMultimapNmax 1 --outFilterMismatchNmax 4 --outSAMattributes All --alignEndsType EndToEnd --outFilterType BySJout --outFilterScoreMin 10 --outSAMmode Full"
## these parameters are inspired by the eCLIP pipeline from ENCODE https://www.encodeproject.org/documents/739ca190-8d43-4a68-90ce-1a0ddfffc6fd/@@download/attachment/eCLIP_analysisSOP_v2.2.pdf
additional_star_align_2nd_round: "--outFilterMultimapNmax 1 --outFilterMismatchNmax 4 --outSAMattributes All --alignEndsType EndToEnd --outFilterType BySJout --outFilterScoreMin 10 --outSAMmode Full"

## Additional Salmon parameters
## Here, you can specify any optional parameters for the index building and/or 
## abundance quantification with Salmon. The following arguments are automatically populated 
## based on the arguments specified elsewhere, and should NOT be specified here:
## Indexing: transcriptome input file, index directory, gencode flag
## Quantification: library type, fastq files, index directory, output directory, number of cores
##--------------------------------------------------------------------------------------------
## Add or remove parameters inside the ""
additional_salmon_index: "-k 31"

## Add or remove parameters inside the ""
## We specify the mean and standard deviation of the fragment length distribution, for use with Salmon. 
## This is important to specify for single-end reads.
## For paired-end reads, these values will define the prior, which is then updated 
## based on the observed fragment lengths.
additional_salmon_quant: "--seqBias --gcBias --fldMean 250 --fldSD 25"
##--------------------------------------------------------------------------------------------


## Information about the experiment
##--------------------------------------------------------------------------------------------
readlength: 150

## Path to metadata text file. This file must contain at least the following columns:
## names: the sample identifiers = the names of the FASTQ files (excluding the _R1/R2.fastq.gz part)
## type: either SE or PE, indicating whether the sample was analyzed 
## via single-end or paired-end sequencing.
metatxt: metadata_riboZero.txt

## The maximal number of cores to use for FastQC, STAR, Salmon and DRIMSeq.
## Note that the actual number of cores available to Snakemake is determined by
## the --cores argument when it is invoked.
ncores: 15
##---------------------------------------------------------------------------------------------


## Path to a folder containing gzipped fastq files, and the file suffix (typically, either fastq or fq). 
## If you have paired-end fastq files, you also need to define the extension distinguishing the two read files. 
## More precisely, ARMOR assumes that paired-end fastq files are named 
## <sample-name>_<fqext1>.<fqsuffix>.gz and <sample-name>_<fqext2>.<fqsuffix>.gz.
## Single-end fastq files are supposed to be named 
## <sample-name>.<fqsuffix>.gz.
##---------------------------------------------------------------------------------------------
FASTQ: FASTQ_RNAseq
fqext1: R1
fqext2: R2
fqsuffix: fastq
##---------------------------------------------------------------------------------------------


## Path to a folder that will store the output generated by the workflow. 
## Additional subfolders of this folder will be generated by the workflow. 
## To put output in the current directory, set output to ".".
##---------------------------------------------------------------------------------------------
output: output_riboZero
##---------------------------------------------------------------------------------------------

## R setup
##---------------------------------------------------------------------------------------------
## Specify "True" if R should be installed in a conda environment or "False" if you want to use 
## your own R installation (then you have to set the path to your library in the .Renviron file)
useCondaR: False
Rbin: /usr/local/R/R-4.0.0/bin/R
##---------------------------------------------------------------------------------------------

## Conditional conda rules
##---------------------------------------------------------------------------------------------
## Should read trimming, STAR mapping, DRIMSeq analysis and gene set analysis be performed? Set
## to False if the step is not required.
run_trimming: True
run_STAR: True
##---------------------------------------------------------------------------------------------

## CLIPper results
clipper: "clipper"
bigwig: "bigwig"

## sf from Rmd/clipper_analysis.html
# sf:
#   20200123.A-6M: 0.6655971
#   20200123.A-6M2: 2.009688
#   20200123.A-RBDm: 0.8694157
#   20200123.A-RBDm2: 1.176744
#   20200123.A-WT: 2.076217
#   20200123.A-WT2: 0.6586076  


